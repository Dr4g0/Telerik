<html>

<head>
    <title>Strings homework</title>
	<link href="styles/js-console.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="styles/styles.css">
</head>

<body>
    <header>
        <h1> 
            Write a script that parses an URL address given in the format:
        </h1>
        <code>
            [protocol]://[server]/[resource]
        </code>
        <h1>
            and extracts from it the [protocol], [server] and [resource] elements. Return the elements in a JSON object. For example from the URL http://www.devbg.org/forum/index.php the following information should be extracted:
        </h1>
        <code>
            {protocol: 'http', server: 'www.devbg.org', resource: '/forum/index.php'}
        </code>
    </header>
    <div>
        <label for = "URL"> Input URL </label>
        <input type = "text" id = "URL">  

        <button onclick="parseURL(document.getElementById('URL').value)">Replace</button> 
    </div>

	<div id="js-console"></div>				 
	<script src="scripts/js-console.js"></script>
    <script src="scripts/stringFormat.js"></script>
	<script>
		/* Task 7. Write a script that parses an URL address given in the format:
            [protocol]://[server]/[resource]
            and extracts from it the [protocol], [server] and [resource] elements. Return the elements in a JSON object. For example from the URL http://www.devbg.org/forum/index.php the following information should be extracted:
            {protocol: 'http', server: 'www.devbg.org', 
             resource: '/forum/index.php'}
        */

        function parseURL(URL) {
            var protocolText = '',
                serverText = '',
                resourceText = '',
                index = 0;

            // we search for : 
            index = URL.indexOf(":");

            // and we get everything before that
            protocolText = URL.substr(0, index);

            // then we get all after : with index + 3 becouse we need to jump after :// 
            serverText = URL.substr(index + 3);
            
            // in this substring we search for first /
            index = serverText.indexOf("/");
            
            // everything after it is the resourc
            resourceText = serverText.substr(index);

            // and everything before is the server
            serverText = serverText.substr(0, index);

            var  parsedURL = {
                    URLprotocol : protocolText,
                    URLserver : serverText,
                    URLresource : resourceText,
                    toString: function personToString() {
                        return "protocol: " + this.URLprotocol + ", server: " + this.URLserver + ", resourse: "  + this.URLresource;
                    }
                }
          
            jsConsole.writeLine(parsedURL);
        }
	</script>
</body>

</html>
